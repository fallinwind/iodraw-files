{"root":{"data":{"text":"LangChain框架下DeepSeek模型接入测试方案（线上API vs 本地Ollama双路径验证）","font-size":10},"children":[{"data":{"text":"测试目标","font-size":10},"children":[{"data":{"text":"验证LangChain对DeepSeek模型的兼容性与调用稳定性","font-size":10},"children":[]},{"data":{"text":"对比线上API模式（deepseek.com）与本地Ollama模式在延迟、成本、隐私、可控性维度的表现","font-size":10},"children":[]},{"data":{"text":"建立可复现、可文档化的端到端测试流程，支持团队快速落地","font-size":10},"children":[]},{"data":{"text":"明确不同场景下的技术选型建议（POC验证 / 内网部署 / 生产级服务）","font-size":10},"children":[]}]},{"data":{"text":"线上API模式说明","font-size":10},"children":[{"data":{"text":"技术原理","font-size":10},"children":[{"data":{"text":"通过LangChain ChatDeepSeek 或 ChatOpenAI 兼容封装调用 DeepSeek 官方 REST API","font-size":10},"children":[]},{"data":{"text":"依赖 https://api.deepseek.com/v1/chat/completions 接口，需有效 API Key","font-size":10},"children":[]}]},{"data":{"text":"实施步骤","font-size":10},"children":[{"data":{"text":"注册 deepseek.com 账号 → 进入 API控制台 创建 API Key","font-size":10},"children":[]},{"data":{"text":"设置环境变量：DEEPSEEK_API_KEY=sk-xxx（避免硬编码）","font-size":10},"children":[]}]},{"data":{"text":"关键配置项","font-size":10},"children":[{"data":{"text":"model: \"deepseek-chat\"（R1主模型）、\"deepseek-coder\"（代码专用）","font-size":10},"children":[]},{"data":{"text":"认证方式：Bearer Token（Authorization: Bearer sk-xxx）","font-size":10},"children":[]}]}]},{"data":{"text":"线下模式说明","font-size":10},"children":[{"data":{"text":"技术原理","font-size":10},"children":[{"data":{"text":"基于 Ollama 作为本地 LLM 运行时，通过 LangChain 的 Ollama 类对接 http://localhost:11434/api/chat","font-size":10},"children":[]},{"data":{"text":"模型运行完全离线，所有推理、tokenization、embedding 均在本地完成","font-size":10},"children":[]},{"data":{"id":"dev9oprxpmw0","created":1765444053604,"text":"支持 ollma 各参数量化模型（1.5b/7b/8b/14b），推荐 7b 版本兼顾性能与内存","font-size":10},"children":[]}]},{"data":{"text":"关键配置项","font-size":10},"children":[{"data":{"text":"base_url: \"http://localhost:11434\"","font-size":10},"children":[]},{"data":{"text":"model: \"deepseek-r1:7b\"","font-size":10},"children":[]},{"data":{"text":"num_predict: 控制最大输出长度（Ollama 特有参数）","font-size":10},"children":[]},{"data":{"text":"远程访问配置（跨设备调用）","font-size":10},"children":[{"data":{"text":"启动时指定绑定地址：OLLAMA_HOST=0.0.0.0:11434 ollama serve","font-size":10},"children":[]},{"data":{"text":"防火墙放行 ollama 服务端口","font-size":10},"children":[]},{"data":{"text":"LangChain 中 base_url 改为 http://<host-ip>:11434","font-size":10},"children":[]}]}]}]},{"data":{"text":"测试结果对比","font-size":10},"children":[{"data":{"text":"稳定性与运维","font-size":10},"children":[{"data":{"text":"线上API","font-size":10},"children":[{"data":{"text":"优势：免运维、高可用SLA（99.9%）","font-size":10},"children":[]},{"data":{"text":"风险：依赖公网、政策风险","font-size":10},"children":[]}]},{"data":{"text":"本地Ollama","font-size":10},"children":[{"data":{"text":"优势：离线、数据零外泄、可定制","font-size":10},"children":[]},{"data":{"text":"风险：需维护模型与GPU兼容性、OOM崩溃需重启","font-size":10},"children":[]}]}]}]},{"data":{"text":"适用场景决策指南","font-size":10},"children":[{"data":{"text":"推荐线上API模式的场景","font-size":10},"children":[{"data":{"text":"快速原型验证（MVP开发周期 < 3天）","font-size":10},"children":[]},{"data":{"text":"无GPU/低配环境","font-size":10},"children":[]}]},{"data":{"text":"推荐本地Ollama模式的场景","font-size":10},"children":[{"data":{"text":"敏感数据处理（合同、病历、财报）","font-size":10},"children":[]},{"data":{"text":"长期高频调用（月调用量 > 50万次）","font-size":10},"children":[]},{"data":{"text":"需要微调或LoRA适配","font-size":10},"children":[]}]},{"data":{"text":"混合部署建议（进阶实践）","font-size":10},"children":[{"data":{"text":"开发/测试环境：本地Ollama","font-size":10},"children":[]},{"data":{"text":"预发布环境：线上API","font-size":10},"children":[]},{"data":{"text":"生产环境：数据敏感性分级","font-size":10},"children":[{"data":{"text":"公共问答类：线上API（CDN缓存）","font-size":10},"children":[]},{"data":{"text":"知识库类：本地Ollama集群（K8s编排）","font-size":10},"children":[]}]},{"data":{"text":"统一LangChain抽象层：os.getenv(\"LLM_MODE\")切换实例","font-size":10},"children":[]}]}]}]},"template":"right","theme":"fresh-blue","version":"1.4.43"}